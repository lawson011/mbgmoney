webpackJsonp([47],{"7yeC":function(a,t,e){"use strict";var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",[e("v-parallax",{attrs:{src:"/assets/bank-parallax.jpg",height:"300"}},[e("div",{staticClass:"parallax-text"},[e("h2",[a._v("Hi there, "+a._s(a.user.first_name))]),e("p",[a._v("This feature allows you to provide new and edit existing card details.")])]),e("div",{staticClass:"parallax-btn"},[e("v-form",{ref:"form1",staticClass:"my-form",attrs:{"lazy-validation":""},model:{value:a.valid1,callback:function(t){a.valid1=t},expression:"valid1"}},[e("v-dialog",{attrs:{"max-width":"650"},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[e("v-btn",{attrs:{slot:"activator",color:"primary",dark:"",large:""},slot:"activator"},[a._v("ADD A NEW CARD")]),e("v-card",{staticClass:"py-5 pl-4 pr-5 card-curved-edges"},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md6:""}},[e("img",{staticClass:"atm",attrs:{src:"/assets/moneybag-atm.png",alt:""}}),void 0!=a.post_data.cvv?e("div",{staticClass:"mt-3 pl-4"},[e("v-btn",{on:{click:function(t){a.dialog=!1}}},[a._v("Cancel")]),e("v-btn",{staticClass:"primary",attrs:{disabled:!a.valid1},on:{click:a.addCard}},[a._v("Save")])],1):a._e()]),e("v-flex",{staticClass:"pl-3",attrs:{md6:""}},[e("div",{staticClass:"mb-4 title"},[a._v("ENTER CARD DETAILS ")]),e("div",{staticClass:"caption primary--text"},[a._v("(Verve and MasterCard Only)")]),a._l(a.msg,function(t){return a.cardPass?e("v-alert",{key:t,attrs:{type:"success",value:!0}},[a._v("\n                  "+a._s(t)+"\n                ")]):a._e()}),a._l(a.msg,function(t){return a.cardFail?e("v-alert",{key:t,attrs:{type:"error",value:!0}},[a._v("\n                  "+a._s(t)+"\n                ")]):a._e()}),e("v-flex",{},[e("div",{staticClass:"caption grey--text"},[a._v("Card Number")]),e("v-text-field",{attrs:{rules:[function(a){return!!a||"This field is required!!"}],mask:"#### #### #### #### #### ###","append-icon":"credit_card",solo:"",label:"Card Number"},model:{value:a.post_data.pan,callback:function(t){a.$set(a.post_data,"pan",t)},expression:"post_data.pan"}})],1),e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md6:"","pr-2":""}},[e("div",{staticClass:"caption grey--text"},[a._v("Expiry Date")]),e("v-text-field",{attrs:{rules:[function(a){return!!a||"This field is required!!"}],mask:"##/##","append-icon":"event",solo:"",label:"MM/YY"},model:{value:a.post_data.exp_date,callback:function(t){a.$set(a.post_data,"exp_date",t)},expression:"post_data.exp_date"}})],1),e("v-flex",{attrs:{md6:""}},[e("div",{staticClass:"caption grey--text"},[a._v("CVV Number")]),e("v-text-field",{attrs:{rules:[function(a){return!!a||"This field is required!!"}],mask:"###","append-icon":"lock",solo:"",label:"CVV"},on:{keyup:a.changeDisplay},model:{value:a.post_data.cvv,callback:function(t){a.$set(a.post_data,"cvv",t)},expression:"post_data.cvv"}})],1)],1),a.post_data.cvv?e("v-flex",{},[e("div",{staticClass:"caption grey--text"},[a._v("Pin")]),e("v-text-field",{style:{display:a.display},attrs:{disabled:"",rules:[function(a){return!!a||"This field is required!!"}],type:"password","append-icon":"lock",solo:"",label:"Card Pin"},model:{value:a.post_data.pin,callback:function(t){a.$set(a.post_data,"pin",t)},expression:"post_data.pin"}})],1):a._e(),a.post_data.cvv?e("v-layout",{attrs:{row:"",wrap:""}},[a._l(a.sort,function(t){return e("v-flex",{key:t,attrs:{xs4:""}},a._l(t,function(t){return e("v-btn",{key:t,attrs:{small:""},on:{click:function(t){return a.press(t)}}},[a._v(a._s(t))])}),1)}),e("v-flex",{attrs:{xs4:""}},[e("v-btn",{attrs:{small:""},on:{click:a.press}},[a._v("del")])],1),e("v-flex",{attrs:{xs4:""}},[e("v-btn",{attrs:{small:""},on:{click:a.press}},[a._v("clear")])],1)],2):a._e()],2)],1)],1)],1),e("v-dialog",{attrs:{"max-width":"400px"},model:{value:a.todialog,callback:function(t){a.todialog=t},expression:"todialog"}},[e("v-form",{ref:"form2",staticClass:"my-form",attrs:{"lazy-validation":""},model:{value:a.valid1,callback:function(t){a.valid1=t},expression:"valid1"}},[e("v-card",{staticClass:"card-curved-edges px-4 py-5 text-xs-center"},[e("div",{staticClass:"body-2"},[a._v("Token Validation")]),e("div",{staticClass:"mt-4 mb-2"},[a._v(a._s(a.to_details.message))]),e("div",{staticClass:"code-box"},[e("v-text-field",{attrs:{solo:"",mask:"##########"},model:{value:a.otp_data.otp,callback:function(t){a.$set(a.otp_data,"otp",t)},expression:"otp_data.otp"}},[e("div",{staticClass:"caption",attrs:{slot:"label"},slot:"label"},[a._v("Enter otp pin")])])],1),e("v-btn",{staticClass:"primary caption",attrs:{disabled:!a.valid},on:{click:a.validateOtp}},[a._v("Proceed")])],1)],1)],1),e("v-dialog",{attrs:{"max-width":"400px"},model:{value:a.modialog,callback:function(t){a.modialog=t},expression:"modialog"}},[e("v-form",{ref:"form3",staticClass:"my-form",attrs:{"lazy-validation":""},model:{value:a.valid1,callback:function(t){a.valid1=t},expression:"valid1"}},[e("v-card",{staticClass:"card-curved-edges px-4 py-5 text-xs-center"},[e("div",{staticClass:"body-2"},[a._v("Validation")]),e("div",{staticClass:"mt-4 mb-2"},[a._v(a._s(a.mo_details.message))]),e("div",{staticClass:"code-box"},[e("v-text-field",{attrs:{solo:""},model:{value:a.mo_data.mobile_number,callback:function(t){a.$set(a.mo_data,"mobile_number",t)},expression:"mo_data.mobile_number"}},[e("div",{staticClass:"caption",attrs:{slot:"label"},slot:"label"},[a._v("Enter mobile number")])])],1),e("v-btn",{staticClass:"primary caption",attrs:{disabled:!a.valid},on:{click:a.validateMo}},[a._v("Proceed")])],1)],1)],1)],1)],1)]),e("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:a.dialog1,callback:function(t){a.dialog1=t},expression:"dialog1"}},[e("img",{staticClass:"my-loader",attrs:{src:"/assets/loader2.gif",alt:""}}),e("h1",{staticClass:"white--text loader-text"},[a._v("Processing...")])]),e("v-dialog",{attrs:{"max-width":"400px"},model:{value:a.delPopUp,callback:function(t){a.delPopUp=t},expression:"delPopUp"}},[e("v-card",{staticClass:"card-curved-edges px-4 py-5"},[e("div",{staticClass:"mb-4"},[a._v("\n          Are you sure to want to proceed with this action ?. \n        ")]),e("div",{staticClass:"mt-3"},[e("v-btn",{staticClass:"primary",attrs:{dark:""},on:{click:a.removeCard}},[a._v("Confirm ")])],1)])],1),e("section",{staticClass:"scoped-container"},[e("v-flex",[a._l(a.msg,function(t){return a.bankChangePass?e("v-alert",{key:t,attrs:{type:"success",value:!0}},[a._v("\n        "+a._s(t)+"\n\n      ")]):a._e()}),a._l(a.msg,function(t){return a.bankChangeFail?e("v-alert",{key:t,attrs:{type:"error",value:!0}},[a._v("\n        "+a._s(t)+"\n\n      ")]):a._e()}),e("v-layout",[e("v-flex",{attrs:{"px-2":"","mt-4":""}},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.bank_list,"hide-actions":""},scopedSlots:a._u([{key:"items",fn:function(t){return e("tr",{},[e("td",[a._v(" "+a._s(t.item.card_type))]),e("td",[a._v("xxxxxxxx"+a._s(t.item.pan_last4_digits))]),e("td",[a._v(a._s(t.item.token_exp_date))]),e("td",{staticClass:"justify-center layout px-0"},[t.item.is_primary?e("v-btn",{staticClass:"caption default-btn green green--text",attrs:{small:"",outline:"",flat:"",disabled:""}},[a._v("default card")]):a._e(),t.item.is_primary?a._e():e("v-btn",{staticClass:"caption default-btn primary primary--text",attrs:{value:t.item.id,small:"",outline:""},on:{click:function(t){return a.popUpDialog(t)}}},[a._v("make default card")]),e("v-dialog",{attrs:{"max-width":"400px"},model:{value:a.dialog2,callback:function(t){a.dialog2=t},expression:"dialog2"}},[e("v-card",{staticClass:"card-curved-edges px-4 py-5"},[a._l(a.pin_msg,function(t){return a.pinPass?e("v-alert",{key:t,attrs:{type:"success",value:!0}},[a._v("\n                      "+a._s(t)+"\n\n                    ")]):a._e()}),a._l(a.pin_msg,function(t){return a.pinFail?e("v-alert",{key:t,attrs:{type:"error",value:!0}},[a._v("\n                      "+a._s(t)+"\n\n                    ")]):a._e()}),e("div",{staticClass:"mb-4"},[a._v("\n                      To make this selection your default card, kindly enter your 4 digit pin below to confirm.\n                    ")]),e("v-form",{ref:"form",staticClass:"my-form",attrs:{"lazy-validation":""},on:{keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.checkPins(t)}},model:{value:a.valid,callback:function(t){a.valid=t},expression:"valid"}},[e("v-text-field",{attrs:{mask:"####",rules:a.newPinRules,width:"200",label:"Enter your 4 digit pin",type:"password",max:"4"},model:{value:a.pin_data.pin,callback:function(t){a.$set(a.pin_data,"pin",t)},expression:"pin_data.pin"}}),e("div",{staticClass:"mt-3"},[e("v-btn",{staticClass:"primary",attrs:{disabled:!a.valid},on:{click:a.checkPins}},[a._v("Submit")])],1)],1)],2)],1)],1),e("td",[e("v-list-tile--avatar",{attrs:{size:"20"}},[e("v-btn",{attrs:{icon:"",flat:"",color:"primary",fab:"",small:"",dark:""},on:{click:function(e){return a.popDelDialog(e,t.item.id)}}},[e("v-icon",[a._v("delete")])],1)],1)],1)])}}])},[e("v-flex",{attrs:{slot:"no-data"},slot:"no-data"},[e("v-btn",{attrs:{color:"primary"},on:{click:a.initialize}},[a._v("\n                Reset")])],1)],1)],1)],1)],2)],1)],1)};s._withStripped=!0;var i={render:s,staticRenderFns:[]};t.a=i},"9TBI":function(a,t,e){var s=e("vPpr");"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);e("rjj0")("257f3c8d",s,!1,{sourceMap:!1})},Gc2T:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("b1/o"),i=e("7yeC"),d=!1;var o=function(a){d||e("9TBI")},n=e("VU/8")(s.a,i.a,!1,o,"data-v-738d97d9",null);n.options.__file="pages/dashboard/card-details.vue",t.default=n.exports},YFWx:function(a,t,e){"use strict";var s=e("mtWM"),i=e.n(s),d=e("lbHh"),o=e.n(d);i.a.defaults.baseURL="http://155.138.240.188/api/v1",i.a.defaults.headers.common.Authorization="JWT "+o.a.get("token"),i.a.defaults.headers.common["Content-Type"]="application/json",t.a=i.a},"b1/o":function(a,t,e){"use strict";var s=e("Dd8w"),i=e.n(s),d=e("NYxO"),o=e("YFWx");t.a={head:{title:"Card Details | MoneyBag.ng"},layout:"user",data:function(){return{cvv:"",numbers:[{1:1},{2:2},{3:3},{4:4},{5:5},{6:6},{7:7},{0:0},{8:8},{9:9}],valid:!0,valid1:!0,display:"none",newPinRules:[function(a){return!!a||"This field is required!!"}],viewDialog:!1,dialog2:!1,dialog1:!1,delPopUp:!1,todialog:!1,cardPass:!1,cardFail:!1,pinPass:!1,pinFail:!1,otp_data:{otp:void 0,trans_ref:void 0},mo_data:{mobile_number:void 0,payment_id:void 0,trans_ref:void 0},post_data:{pan:void 0,exp_date:void 0,cvv:void 0,pin:""},pin_data:{pin:""},card_data:{card_id:void 0},items:[{text:"Home",disabled:!1},{text:"User",disabled:!0}],dialog:!1,bankChangePass:!1,bankChangeFail:!1,headers:[{text:"CARD TYPE",align:"left",value:"card_type"},{text:"CARD NUMBER",align:"left",value:"pan_last4_digits"},{text:"EXPIRY DATE",align:"left",value:"token_exp_date"},{text:"Actions",align:"center",value:"userId",sortable:!1}],editedIndex:-1,editedItem:{bankName:"",accountNumber:"",accountName:"",bankVerificationNumber:"",accountType:""},defaultItem:{bankName:"",accountNumber:"",accountName:"",bankVerificationNumber:"",accountType:""}}},asyncData:function(a){var t=a.store;o.a.get("/bank_detail/user_card_detail").then(function(a){t.commit("addUserBank",a.data.data)})},computed:i()({sort:function(){return this.numbers.sort(function(){return Math.random()-.5})}},Object(d.mapState)(["bank_list","user","url","pin_msg","msg","to_details","mo_details"])),methods:{press:function(a){var t=a.target.innerText;this.post_data.pin.length<=3?("CLEAR"===t&&(this.post_data.pin=""),"DEL"===t&&(this.post_data.pin=this.post_data.pin.slice(0,-1)),"CLEAR"!==t&&"DEL"!==t&&(this.post_data.pin+=t)):this.post_data.pin.length>=3&&("CLEAR"===t&&(this.post_data.pin=""),"DEL"===t&&(this.post_data.pin=this.post_data.pin.slice(0,-1)))},changeDisplay:function(){this.display="block"},updateCardStore:function(){var a=this;o.a.get("/bank_detail/user_card_detail").then(function(t){a.$store.commit("addUserBank",t.data.data)})},addCard:function(){var a=this;this.$refs.form1.validate()&&(this.dialog1=!0,o.a.post("/bank_detail/add_new_card",this.post_data).then(function(t){!0===t.data.status?(a.dialog1=!1,a.updateCardStore(),a.dialog=!1):"TO"===t.data.status?(a.dialog1=!1,a.$store.commit("addTokenVal",t.data.data),a.todialog=!0,a.dialog=!1):"MO"===t.data.status&&(a.dialog1=!1,a.$store.commit("addMoTokenVal",t.data.data),a.todialog=!1,a.modialog=!0,a.dialog=!1)}).catch(function(t){a.dialog1=!1,a.$store.commit("addMoTokenVal",t.response.data.data),a.cardPass=!1,a.cardFail=!0}))},validateOtp:function(){var a=this;this.$refs.form2.validate()&&(this.otp_data.trans_ref=this.$store.state.to_details.transactionRef,this.dialog1=!0,o.a.post("/bank_detail/validate_otp",this.otp_data).then(function(t){!0===t.data.status&&(a.updateCardStore(),a.$store.commit("addMsg",t.data.data),a.dialog1=!1,a.todialog=!1,a.dialog=!0,a.cardPass=!0,a.cardFail=!1,setTimeout(function(){a.dialog=!1},2e3))}).catch(function(t){a.dialog1=!1,a.$store.commit("addMsg",t.response.data.data),a.dialog=!0,a.todialog=!1,a.cardPass=!1,a.cardFail=!0}))},validateMo:function(){var a=this;this.$refs.form3.validate()&&(this.mo_data.trans_ref=this.$store.state.mo_details.transactionRef,this.mo_data.payment_id=this.$store.state.mo_details.paymentId,this.dialog1=!0,o.a.post("/bank_detail/validate_mo",this.mo_data).then(function(t){!0===t.data.status&&(a.updateCardStore(),a.$store.commit("addMsg",t.data.data),a.dialog1=!1,a.todialog=!1,a.dialog=!0,a.cardPass=!0,a.cardFail=!1,setTimeout(function(){a.dialog=!1},2e3))}).catch(function(t){a.dialog1=!1,a.$store.commit("addMsg",t.response.data.data),a.dialog=!0,a.todialog=!1,a.cardPass=!1,a.cardFail=!0}))},popUpDialog:function(a){this.card_data.card_id=a.target.value,this.dialog2=!0},checkPins:function(){var a=this;o.a.post("/user/check_pin",this.pin_data).then(function(t){t.data.status&&(a.$store.commit("addPinMsg",t.data.data),a.pinPass=!0,a.pinFail=!1,setTimeout(function(){a.dialog2=!1,a.pinPass=!1,a.pin_data.pin=null},1500),a.changeDefault())}).catch(function(t){a.$store.commit("addPinMsg",t.response.data.data),a.pinFail=!0,a.pinPass=!1})},changeDefault:function(){var a=this;this.$refs.form.validate()&&o.a.post("/bank_detail/change_card",this.card_data).then(function(t){t.data.status&&(a.$store.commit("addMsg",t.data.data),a.bankChangePass=!0,a.bankChangeFail=!1,a.updateCardStore())}).catch(function(t){a.bankChangeFail=!0,a.bankChangePass=!1,a.$store.commit("addMsg",t.response.data.data)})},popDelDialog:function(a,t){this.delPopUp=!0,this.card_data.card_id=t},removeCard:function(){var a=this;o.a.post("/bank_detail/remove_card",this.card_data).then(function(t){t.data.status&&(a.$store.commit("addMsg",t.data.data),a.bankChangePass=!0,a.bankChangeFail=!1,a.delPopUp=!1,a.updateCardStore())}).catch(function(t){a.bankChangeFail=!0,a.bankChangePass=!1,a.$store.commit("addMsg",t.response.data.data)})}}}},vPpr:function(a,t,e){(a.exports=e("FZ+f")(!1)).push([a.i,".parallax-text[data-v-738d97d9]{max-width:500px;margin-left:4%}.parallax-btn[data-v-738d97d9]{margin-left:4%}.scoped-container[data-v-738d97d9]{margin:2% auto;padding:0 20px;max-width:1160px}.atm[data-v-738d97d9]{width:250px}.v-btn[data-v-738d97d9]{margin-left:0}.my-card[data-v-738d97d9]{width:650px}.absolute[data-v-738d97d9]{position:absolute;right:0}.default-btn[data-v-738d97d9]{width:150px}",""])}});